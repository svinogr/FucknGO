{{ define "server"}}
    {{ template "header" .}}

    <script> $(document).ready(function () {
            $("#addserver").click(function () {
                var form = $("#addserver_form").serializeArray();
                var data = new Map();
                $(form).each(function (index, obj) {
                    data.set(obj.name, obj.value);
                });

                $.ajax({
                    'url': '/api/server',
                    'method': 'POST',
                    'dataType': 'json',
                    'contentType': 'application/json',
                    'data': JSON.stringify({
                        "port": data.get('port'),
                        "static_resource": data.get('static_resource')
                    }),
                    success: function (response) { //Данные отправлены успешно
                        result = JSON.stringify(response);
                        alert("rr" + result);
                        window.location.href = "/api/serverpage";
                    },
                    error: function (response) { // Данные не отправлены
                        //   alert("что за говно ты написал в форму?!?");
                        //   result = $.parseJSON(response);
                        alert("error");
                    }
                });
            });
        });
    </script>
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>

    <div class="container" style="margin-top:50px;" >
        <div class="row">
            <div class="col">
                <ul class="list-group list-group-flush">
                    {{range . }}
                        <li class="list-group-item" id="{{.Id}}">Порт: {{.Port}} <br> Static resource: {{.StaticResource}} </li>
                    {{end}}
                </ul>
            </div>
            <div class="col">
                <div class="container">
                    <form id="addserver_form" action="" method="POST">
                        <p>Port</p><input class="form-control me-2" type="text" name="port">
                        <p>Static resource</p><input class="form-control me-2" type="text" name="static_resource">
                        <button id="addserver" class="btn btn-outline-success float-right">Добавить новый сервер</button>
                    </form>
                </div>
            </div>

        </div>
    </div>

    </body>
    </html>

{{end}}